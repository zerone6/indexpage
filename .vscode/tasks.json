{
  "version": "2.0.0",
  "tasks": [
    // ========================================
    // ÏÑúÎπÑÏä§ ÏãúÏûë (Start)
    // ========================================
    {
      "label": "1Ô∏è‚É£ Start Other Services",
      "type": "shell",
      "command": "docker compose up -d main-page highschool",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "2Ô∏è‚É£ Start Indexpage (Nginx)",
      "type": "shell",
      "command": "if docker compose ps main-page highschool 2>/dev/null | grep -q 'Up'; then docker compose up -d nginx-proxy; else echo '‚ö†Ô∏è  Backend services not running! Run \"1Ô∏è‚É£ Start Other Services\" first.'; exit 1; fi",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "3Ô∏è‚É£ Start Full Services",
      "type": "shell",
      "command": "docker compose up -d && echo '' && echo '‚úÖ All services started!' && echo '' && docker compose ps",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },

    // ========================================
    // ÏÑúÎπÑÏä§ Ï§ëÏßÄ (Stop)
    // ========================================
    {
      "label": "4Ô∏è‚É£ Stop Indexpage (Nginx)",
      "type": "shell",
      "command": "docker compose stop nginx-proxy && echo '‚úÖ Nginx stopped'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "5Ô∏è‚É£ Stop Other Services",
      "type": "shell",
      "command": "docker compose stop main-page highschool && echo '‚úÖ Other services stopped'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "6Ô∏è‚É£ Stop Full Services",
      "type": "shell",
      "command": "docker compose down && echo '‚úÖ All services stopped and removed'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },

    // ========================================
    // Í∞úÎ∞ú Ìé∏Ïùò Í∏∞Îä• (Development)
    // ========================================
    {
      "label": "7Ô∏è‚É£ Reload Nginx Config",
      "type": "shell",
      "command": "docker compose exec nginx-proxy nginx -t && docker compose exec nginx-proxy nginx -s reload && echo '‚úÖ Nginx config reloaded'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "8Ô∏è‚É£ Rebuild and Restart Main-Page",
      "type": "shell",
      "command": "docker compose up -d --build main-page && echo '' && echo '‚úÖ Main-page rebuilt and restarted!' && docker compose logs --tail=20 main-page",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "9Ô∏è‚É£ Rebuild and Restart Highschool",
      "type": "shell",
      "command": "docker compose up -d --build highschool && echo '' && echo '‚úÖ Highschool rebuilt and restarted!' && docker compose logs --tail=20 highschool",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },

    // ========================================
    // Î°úÍ∑∏ Î∞è Î™®ÎãàÌÑ∞ÎßÅ (Logs & Monitoring)
    // ========================================
    {
      "label": "üìã View All Logs",
      "type": "shell",
      "command": "docker compose logs -f",
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "üìã View Nginx Logs",
      "type": "shell",
      "command": "docker compose logs -f nginx-proxy",
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "üìã View Main-Page Logs",
      "type": "shell",
      "command": "docker compose logs -f main-page",
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "üìã View Highschool Logs",
      "type": "shell",
      "command": "docker compose logs -f highschool",
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "üìä View Service Status",
      "type": "shell",
      "command": "clear && echo '=== Docker Compose Services ===' && docker compose ps && echo '' && echo '=== Resource Usage ===' && docker stats --no-stream",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      }
    },

    // ========================================
    // ÌÖåÏä§Ìä∏ Î∞è Í≤ÄÏ¶ù (Testing)
    // ========================================
    {
      "label": "üß™ Test Endpoints",
      "type": "shell",
      "command": "echo '=== Testing Endpoints ===' && echo '' && echo 'Main Page (HTTPS):' && curl -k -s https://localhost/ | grep -q 'Í∞ÄÏ°± Ï†ïÎ≥¥' && echo '‚úÖ OK' || echo '‚ùå FAIL' && echo '' && echo 'Highschool (HTTPS):' && curl -k -s https://localhost/highschool/ | head -c 100 && echo '' && echo '' && echo 'Health Check:' && curl -s http://localhost/health && echo ''",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "üß™ Test Nginx Config",
      "type": "shell",
      "command": "docker compose exec nginx-proxy nginx -t",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },

    // ========================================
    // Ïú†Ìã∏Î¶¨Ìã∞ (Utilities)
    // ========================================
    {
      "label": "üîß Clean Up Docker Resources",
      "type": "shell",
      "command": "echo '‚ö†Ô∏è  This will remove unused Docker resources...' && docker compose down && docker system prune -f && echo '‚úÖ Cleanup complete'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "üîß Rebuild All Images (No Cache)",
      "type": "shell",
      "command": "docker compose build --no-cache && echo '‚úÖ All images rebuilt'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "üåê Open in Browser",
      "type": "shell",
      "command": "open https://localhost/",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },

    // ========================================
    // ÌîÑÎ°úÎçïÏÖò Î™®Îìú (Production Mode)
    // ========================================
    {
      "label": "üöÄ Start Production Mode (GHCR)",
      "type": "shell",
      "command": "docker compose -f docker-compose.yml pull && docker compose -f docker-compose.yml up -d && echo '' && echo '‚úÖ Production mode started!' && docker compose ps",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "üöÄ Stop Production Mode",
      "type": "shell",
      "command": "docker compose -f docker-compose.yml down && echo '‚úÖ Production mode stopped'",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    }
  ]
}
